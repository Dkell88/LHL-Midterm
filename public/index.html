<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>LHL-Midterm</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>
    <style>
      /* #map { height: 180px; } */
      #map {position: absolute; top:0; bottom:0; left:0; right: 0;}
    </style>
 

  </head>
  <body>
    <div id="map"></div>
    <script>
      var map = L.map('map', {
        doubleClickZoom: false}
        ).setView([49.262838, -122.781071], 16);
      
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/streets-v11',
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'pk.eyJ1IjoiZGtlbGw4OCIsImEiOiJjbDJ3Zm44NjMwZjVqM2RxY3gyN3J6dXJ2In0.SYE3QdtfFxH63YvUTI7FMA'
      }).addTo(map);

      // // Create an icon class
      // const Icon = L.Icon.extend({
      //   options: {
      //   iconSize: [20,80],
      //   iconAncor: [22,94],
      //   popupAnchor: [12,-90]
      //   }
      // })
      // //define that icon
      // const greenIcon = new Icon({iconURL:'the url to use'})
      // //set makers with that icon
      // const greenMarker = L.marker([49.27, -122.78], {greenIcon}).addTo(map);
      
      // //define a custom icon
      // const swordIcon = L.icon ({
      //   iconUrl: '../images/—Pngtree—sword_1547700',
      //   iconSize: [20,80],
      //   iconAncor: [22,94],
      //   popupAnchor: [12,-90]
      // })

      //Static makers
      const marker2 = L.marker(
        [49.277, -122.78]).addTo(map);
      const marker = L.marker([49.27, -122.78]).addTo(map);
      marker.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();
      
      //Add scale to map
      L.control.scale({
        metric: true,
        imperial: false,
        position: 'bottomright'
      }).addTo(map);


      // //Adding a DOM item (might not be worth it, Not working)
      // L.Control.Watermark = L.Control.extend({
      //   onAdd:function(map){
      //     // var title = L.DOMUtil.create('h1');
      //     // title.innerText = "This is the map title"
      //     // return title;
      //     var img = L.DonUtil.create('img');
      //     img.scr = 'logo_01.png';
      //     img.style.width = "500px";
      //     return img;
      //   }, 
      //   onRemove:function(map){},
      // });
      // L.control.watermark = function(opts){
      //   return new L.Control.Watermark(opts);
      // }
      // L.control.watermark({position:'topleft'}).addTo(map);
      

      function onMapClick(e) {
        console.log("map clicked, marker added");
        let marker = new L.marker(e.latlng);

        // marker.on('dragend', function(event){
        // const marker = event.target;
        // const position = marker.getLatLng();
        // marker.setLatLng(new L.LatLng(position.lat, position.lng),{draggable:'true'});
        // map.panTo(new L.LatLng(position.lat, position.lng))
        // });

        map.addLayer(marker);
      };

      map.on('click', onMapClick);
      console.log("End of script");
      </script>
  </body>
  </html>
  

  <!-- function onMapClick(e) {
    console.log("map clicked");
    //gib_uni();
    marker = new L.marker(e.latlng, {id:uni, icon:redIcon, draggable:'true'});
    marker.on('dragend', function(event){
      var marker = event.target;
      var position = marker.getLatLng();
      console.log(position);
      marker.setLatLng(position,{id:uni,draggable:'true'}).bindPopup(position).update();
    });
    map.addLayer(marker);
  }; -->